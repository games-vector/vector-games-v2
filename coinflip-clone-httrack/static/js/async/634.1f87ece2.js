"use strict";(self.webpackChunkcoinflip_client=self.webpackChunkcoinflip_client||[]).push([["634"],{7625:function(e,s,l){l.r(s),l.d(s,{Menu:()=>C,default:()=>S});var a=l(4512),n=l(2735),i=l(6011),t=l(9224),c=l(7653),d=l(4025),o=l(9931),r=l(8885),u=l(3668),h=l(3432),m=l(350),x=l(4232),j=l(3530);let v=new Map,g=(e,s)=>{let l=v.get(e);if(!l){try{let l=localStorage.getItem(e);s=l?JSON.parse(l):s}catch(s){console.error(`Failed to load key "${e}" from localStorage`,s)}l=(0,j.td)(s),v.set(e,l)}return(0,n.useEffect)(()=>(0,j.cE)(()=>{try{window.localStorage.setItem(e,JSON.stringify(l.value))}catch(s){console.error(`Failed to save key "${e}" to localStorage`,s)}}),[e,l]),l};var p=l(5530),f=l(1182),b=l(4375),y=l(3659),k=l(8118),N=l(3540),w=l(2712);let C=e=>{let{open:s,onClose:l,t:v,CustomModal:C,howToPlayData:S}=e,Z=(0,y.Fg)(),{width:E}=(0,x.i)(),M=(0,n.useRef)(null),{data:A}=o.Y.useQuery(),F=(null==A?void 0:A.gameAvatar)??0,I=g("music-muted",null),P=g("sfx-muted",null),T=(0,p.h)("isPromoCodeEnabled",!1),D=(0,p.h)("vfx-off",!1),G=g("fast-game-off",!1),$=(0,p.h)("space-click-off",Z.togglePlayAndGoTurnedOff),{HowToPlay:O,ModalGameRules:_,History:H,ChangeAvatar:B,ProvablyFairSettings:J}=(0,k.Z)(),Q=(0,h.x)(),R=(0,N.UA)(),{lobbyUrl:K}=(0,r.MW)(),{toggle:U}=(0,i.O)(),{gameConfig:V}=(0,n.useContext)(u.Vo);(0,n.useEffect)(()=>(0,j.cE)(()=>{b.y.dispatch(b.m.toggleMusic,I.value||!1),b.y.dispatch(b.m.toggleSfx,P.value||!1),b.y.dispatch(b.m.toggleHeavyAnimations,D.value),b.y.dispatch(b.m.toggleSpacePlayAndGo,$.value)}),[I,P,D,$]),(0,n.useEffect)(()=>{if((null==V?void 0:V.isMusicEnabled)!==void 0){let e=null!==I.value?I.value:!(null==V?void 0:V.isMusicEnabled);I.value=e,b.y.dispatch(b.m.toggleMusic,e)}if((null==V?void 0:V.isSoundEnabled)!==void 0){let e=null!==P.value?P.value:!(null==V?void 0:V.isSoundEnabled);P.value=e,b.y.dispatch(b.m.toggleSfx,e)}(null==V?void 0:V.isPromoCodeEnabled)!==void 0&&(T.value=!(null==V?void 0:V.isPromoCodeEnabled))},[null==V?void 0:V.isMusicEnabled,null==V?void 0:V.isSoundEnabled,null==V?void 0:V.isPromoCodeEnabled]);let W=(e,s)=>{l(),b.y.dispatch(b.m.showModal,()=>{let{t:l}=(0,f.$G)();return(0,a.jsx)(e,{t:l,...s})})},Y=e=>()=>{e.value=!e.value};return(0,a.jsxs)(t.Fe,{$visible:s,$width:E,ref:M,id:"menu-container",children:[(0,a.jsxs)(t.ti,{children:[(0,a.jsx)(t.$c,{children:(0,a.jsx)("img",{src:(0,m.T)(F),alt:"avatar"})}),(0,a.jsx)(t.lB,{children:null==A?void 0:A.nickname}),(0,a.jsx)(t.Qp,{"data-testid":"menu-avatar-modal",onClick:()=>W(B),children:v("global.menu.change_avatar")})]}),(0,a.jsxs)(t.Dv,{children:[Z.isFullScreenIconInMenu&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.v3,{children:(0,a.jsxs)(t.sN,{"data-testid":"menu-fullscreen",className:"point hover",onClick:U,children:[(0,a.jsx)(c.Z,{name:"fullscreen"}),(0,a.jsx)("span",{children:v("global.Play in fullscreen")})]})}),(0,a.jsx)(t.eD,{})]}),(0,a.jsxs)(t.v3,{children:[(0,a.jsxs)(t.sN,{children:[(0,a.jsx)(c.Z,{name:"sound"}),(0,a.jsx)("span",{children:v("global.menu.Sound")})]}),(0,a.jsx)(d.Z,{small:!0,testId:"menu-sound-switch",checked:null===P.value||!P.value,onClick:Y(P)})]}),!Z.isToggleMusicSwitchHidden&&(0,a.jsxs)(t.v3,{children:[(0,a.jsxs)(t.sN,{children:[(0,a.jsx)(c.Z,{name:"music"}),(0,a.jsx)("span",{children:v("global.menu.Music")})]}),(0,a.jsx)(d.Z,{small:!0,testId:"menu-music-switch",checked:null===I.value||!I.value,onClick:Y(I)})]}),Z.isToggleHeavyAnimationsSwitchAvailable&&(0,a.jsxs)(t.v3,{children:[(0,a.jsxs)(t.sN,{children:[(0,a.jsx)(c.Z,{name:"animation"}),(0,a.jsx)("span",{children:v("coinflip.ANIMATIONS")})]}),(0,a.jsx)(d.Z,{small:!0,testId:"menu-animation-switch",checked:!D.value,onClick:Y(D)})]}),Z.isToggleFastGame&&(0,a.jsxs)(t.v3,{id:"fast_game",children:[(0,a.jsxs)(t.sN,{children:[(0,a.jsx)(c.Z,{name:"fastGame"}),(0,a.jsx)("span",{children:"Turbo"})]}),(0,a.jsx)(d.Z,{small:!0,testId:"menu-fast-game-switch",checked:!G.value,onClick:Y(G)})]}),!Q&&Z.isToggleSpacePlayAndGo&&(0,a.jsxs)(t.v3,{children:[(0,a.jsxs)(t.sN,{children:[(0,a.jsx)(c.Z,{name:"spacebar"}),(0,a.jsx)("span",{children:v(Z.toggleSpacePlayAndGoText)})]}),(0,a.jsx)(d.Z,{small:!0,testId:"menu-spacebar-switch",checked:!$.value,onClick:Y($)})]}),(0,a.jsx)(t.eD,{}),!Z.hideFairSettings&&(0,a.jsxs)(t.sN,{"data-testid":"menu-fair-settings",className:"point hover",onClick:()=>W(J),children:[(0,a.jsx)(c.Z,{name:"security"}),(0,a.jsx)("span",{children:v("global.menu.fair_settings")})]}),(0,a.jsxs)(t.sN,{"data-testid":"menu-bet-limits",className:"point gea hover",onClick:()=>W(_),children:[(0,a.jsx)(c.Z,{name:"rules"}),(0,a.jsx)("span",{children:v("global.game-rules.Game rules")})]}),(0,a.jsx)(w.D,{hideFor:[r.D$.social],children:(0,a.jsxs)(t.sN,{"data-testid":"menu-bets-history",className:"point hover",onClick:()=>W(H),children:[(0,a.jsx)(c.Z,{name:"history"}),(0,a.jsx)("span",{children:v("global.history.My bets history")})]})}),(0,a.jsxs)(t.yZ,{children:[(0,a.jsx)(t.eD,{}),(0,a.jsxs)(t.sN,{"data-testid":"menu-how-to-play-mobile",className:"point",onClick:()=>{b.y.dispatch(b.m.showModal,e=>{let{t:s}=e;return(0,a.jsx)(O,{t:s,...S})}),l()},children:[(0,a.jsx)(c.Z,{name:"errorRounded"}),(0,a.jsx)("span",{children:v("global.How to play")})]})]}),C&&(0,a.jsxs)(t.sN,{className:"point hover",id:C.displayName,onClick:()=>W(C),children:[(0,a.jsx)(c.Z,{name:C.displayName||"info"}),(0,a.jsx)("span",{children:v(`global.${C.displayName}`)})]}),K&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.eD,{}),(0,a.jsxs)(t.sN,{"data-testid":"menu-back-btn",className:"point gea hover",onClick:()=>{window.parent.location.href=K},children:[(0,a.jsx)(c.Z,{name:"back"}),(0,a.jsx)("span",{children:v("global.menu.BACK_TO_HOME")})]})]}),!(null==R?void 0:R.disablePoweredBy)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.eD,{}),(0,a.jsxs)(t.sN,{children:[(0,a.jsx)(t.cx,{children:"Powered by"}),(0,a.jsx)(t.Sv,{})]})]})]})]})},S=C}}]);